10 REM SIDEWAYS SCROLLING USING THE 
20 REM OPERATING SYSTEM SUBROUTINES 
230
240 OSWRCH=&FFEE:OSBYTE=&FFF4
250 SCR=&70
260 DIM START 1000
270 FOR PASS=0 TO 3 STEP 3
280 P%=START
290 RESTORE
300 PROCvdu(29)
310 REM SET UP TEST GRAPHICS SCREEN 
320 DATA 22,2,18,0,132,16,18,0,3,25,4,500@,500@,25,1,200@,0@,25,81,0@,-200@,25 ,1,-200@,0@,25,81,0@,200@
330
340 [OPT PASS 
350 .BEGIN 
360 LDA #&00 
370 STA SCR 
380 LDA #&06 
390 STA SCR+1 
400 .SCROLL
410 LDA #&13
420 JSR OSBYTE
430 ]
440 PROCvdu(7)
450 [OPT PASS
460 LDA SCR
470 BNE OVER
480 ]PROCvdu(7)
490 [OPTPASS
500 .OVER
510 INC SCR
520 BNE SKIP
530 INC SCR+1
540 .SKIP
550 LDA SCR
560 BNE SCROLL
570 LDA SCR+1
580 CMP #&10
590 BNE SCROLL
600 BEQ BEGIN
610 RTS:]
620 NEXT PASS
630 CALL START
640
650 REM DATA TO SET UP 6845 CRTC REG'S 
660 DATA 23@,13,SCR,0,0@,0@,0
670 DATA 23@,12,SCR+1,0,0@,0@,0
680 END
1050 DEFPROCvdu(N)
1060 LOCAL D,D$,B,byte,item,lbyte
1070 FOR item=1 TO N
1080 READ D$
1090 IF RIGHT$(D$,1)="@" THEN B=2 ELSE B=1
10100 D=EVAL(D$)
10110 IF ASC(D$)>64 THEN [OPT PASS:LDA D:JSR OSWRCH:]:NEXT item
10120 IF D<0 THEN D=(ABS(D) EOR &FFFF)+1 
10130 byte=D MOD 256:PROCform
10140 IF B=2 THEN byte=D DIV 256:PROCform
10150 NEXT item
10160 ENDPROC
10170
10180 DEFPROCform
10190 IF byte<>lbyte THEN [OPT PASS:LDA #byte:]
10200 [OPT PASS:JSR OSWRCH:]
10210 lbyte=byte
10220 ENDPROC